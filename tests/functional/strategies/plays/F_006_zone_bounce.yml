version: "3.0.0"
name: "F_006_zone_bounce"
description: "Functional Test: Zone Bounce - Tests zone detection and between operator"

symbol: "BTCUSDT"
tf: "1h"

features:
  atr_14:
    indicator: atr
    params:
      length: 14
  rsi_14:
    indicator: rsi
    params:
      length: 14

structures:
  swing:
    detector: swing
    params:
      left: 5
      right: 5
  zone:
    detector: zone
    params:
      atr_source: "atr_14"
      width_mult: 1.0

# Engine components tested:
# - Zone structure detection
# - Zone state transitions (ACTIVE -> TOUCHED -> BROKEN)
# - between operator for zone bounds
# - Zone entry logic
actions:
  entry_long:
    all:
      - ["zone.demand_active", "==", true]     # Demand zone active
      - between: ["close", "zone.demand_lower", "zone.demand_upper"]  # In zone
      - ["rsi_14", "<", 40]                     # Oversold confirmation

risk:
  stop_loss_pct: 1.0
  take_profit_pct: 3.0
  max_position_pct: 100.0

_test_metadata:
  test_id: "F_006"
  category: "zone_detection"
  min_signals: 2
  max_signals: 15
  warmup_bars: 30
  edge_cases:
    - "overlapping_zones"
    - "zone_invalidation"
    - "rapid_zone_breaks"
