# ============================================
# TRADE BOT CONFIGURATION
# ============================================
# Copy this file to api_keys.env and fill in your keys
# ============================================

# ============================================
# IMPORTANT: DATA vs TRADING API SEPARATION
# ============================================
# This bot uses DIFFERENT APIs for different purposes:
#
#   DATA OPERATIONS (historical data, market prices):
#     - ALWAYS uses LIVE API (api.bybit.com)
#     - Requires BYBIT_LIVE_DATA_API_KEY or BYBIT_LIVE_API_KEY
#     - Reason: Accurate, real market data
#
#   TRADING OPERATIONS (orders, positions):
#     - Uses DEMO or LIVE based on BYBIT_USE_DEMO setting
#     - DEMO: api-demo.bybit.com (FAKE MONEY)
#     - LIVE: api.bybit.com (REAL MONEY)
#
# SAFETY GUARD RAILS:
#   - TRADING_MODE=real + BYBIT_USE_DEMO=true → BLOCKED (dangerous mismatch)
#   - TRADING_MODE=paper + BYBIT_USE_DEMO=false → WARNING (live API for paper)
# ============================================

# ============================================
# TRADING MODE
# ============================================
# paper = Simulated trades (safe for testing)
# real = Live trading (executes real orders)
#
# NOTE: Trading mode must match BYBIT_USE_DEMO setting!
#   - paper + BYBIT_USE_DEMO=true  → Normal (demo trading)
#   - real + BYBIT_USE_DEMO=false  → Normal (live trading)
#   - real + BYBIT_USE_DEMO=true   → ERROR! (blocked by safety check)
TRADING_MODE=paper

# ============================================
# BYBIT ENVIRONMENT: DEMO vs LIVE
# ============================================
# Bybit provides two separate environments:
#
#   DEMO (FAKE MONEY):
#     - API: api-demo.bybit.com
#     - Purpose: Strategy development, testing, experimentation
#     - Risk: Zero - no real capital at risk
#
#   LIVE (REAL MONEY):
#     - API: api.bybit.com  
#     - Purpose: Production trading with validated strategies
#     - Risk: Real capital - use with strict risk controls!
#
# Each environment requires its own API keys!
# Set this to switch between environments:
#   true = DEMO (FAKE MONEY - safe for testing)
#   false = LIVE (REAL MONEY - use with caution!)
BYBIT_USE_DEMO=true

# ============================================
# DEMO API KEYS (FAKE MONEY)
# ============================================
# Create DEMO keys at: https://www.bybit.com/app/user/api-management
# Select "Demo Trading" when creating the key
# These keys only work with api-demo.bybit.com
BYBIT_DEMO_API_KEY=your_demo_api_key
BYBIT_DEMO_API_SECRET=your_demo_api_secret

# Optional: Separate read-only key for DEMO data (120 RPS vs 50 RPS)
BYBIT_DEMO_DATA_API_KEY=
BYBIT_DEMO_DATA_API_SECRET=

# ============================================
# LIVE API KEYS (REAL MONEY!)
# ============================================
# Create LIVE keys at: https://www.bybit.com/app/user/api-management
# These keys work with api.bybit.com - REAL MONEY!
# Only fill these in when ready for LIVE trading
BYBIT_LIVE_API_KEY=your_live_api_key
BYBIT_LIVE_API_SECRET=your_live_api_secret

# ============================================
# LIVE DATA API KEY (REQUIRED FOR HISTORICAL DATA!)
# ============================================
# IMPORTANT: Historical data and market data ALWAYS use LIVE API
# for accuracy, regardless of BYBIT_USE_DEMO setting.
#
# Create a read-only key (no trading permissions) for data fetching:
# - Higher rate limit (120 RPS vs 50 RPS)
# - Safer (can't execute trades)
# - Required for accurate historical data sync
#
# If not set, falls back to BYBIT_LIVE_API_KEY (less ideal)
BYBIT_LIVE_DATA_API_KEY=your_live_readonly_key
BYBIT_LIVE_DATA_API_SECRET=your_live_readonly_secret

# ============================================
# LEGACY API KEY FORMAT (also supported)
# ============================================
# If you only set these, they'll be used for whichever mode is active
# BYBIT_API_KEY=your_api_key
# BYBIT_API_SECRET=your_api_secret
# BYBIT_DATA_API_KEY=your_data_api_key
# BYBIT_DATA_API_SECRET=your_data_api_secret

# ============================================
# RISK MANAGEMENT
# ============================================
MAX_LEVERAGE=3
MAX_POSITION_SIZE_USD=50
MAX_DAILY_LOSS_USD=20
MIN_BALANCE_USD=10

# ============================================
# TRADING SETTINGS
# ============================================
DEFAULT_SYMBOLS=BTCUSDT,ETHUSDT

# ============================================
# DATA COLLECTION
# ============================================
ENABLE_DATA_CAPTURE=false
DATA_CAPTURE_SYMBOLS=BTCUSDT,ETHUSDT
DATA_CAPTURE_INTERVAL_SECONDS=60

# ============================================
# WEBSOCKET & REALTIME MODE
# ============================================
# WebSocket streams provide real-time data with lower latency than REST polling.
#
# WebSocket Endpoints (handled automatically based on BYBIT_USE_DEMO):
#   - Demo: stream-demo.bybit.com (for demo account data)
#   - Live: stream.bybit.com (for live account data)
#
# PUBLIC streams (tickers, orderbook, klines): Market data is the same
# for demo and live, so you can optionally use mainnet streams in demo mode.
#
# PRIVATE streams (positions, orders, wallet): Must match your API mode
# since authentication is account-specific.

# Enable WebSocket for real-time data
ENABLE_WEBSOCKET=true

# Runner mode: polling (traditional) or realtime (event-driven)
# realtime mode uses WebSocket events to trigger strategy evaluation
RUNNER_MODE=polling

# Prefer WebSocket data over REST (when available)
PREFER_WEBSOCKET_DATA=true

# Fall back to polling if WebSocket disconnects
WS_FALLBACK_TO_POLLING=true

# Use mainnet WebSocket for public market data even in demo mode
# Market data is the same on demo and mainnet, this can help if
# demo WebSocket has connectivity issues
WS_USE_MAINNET_FOR_PUBLIC=false

# Public stream toggles
WS_ENABLE_TICKER=true
WS_ENABLE_ORDERBOOK=false
WS_ENABLE_TRADES=false
WS_ENABLE_KLINES=true

# Kline intervals to subscribe (comma-separated)
WS_KLINE_INTERVALS=15

# Private stream toggles
WS_ENABLE_POSITIONS=true
WS_ENABLE_ORDERS=true
WS_ENABLE_EXECUTIONS=true
WS_ENABLE_WALLET=true

# Rate limiting for realtime mode
WS_MIN_EVAL_INTERVAL=1.0
WS_MAX_EVALS_PER_MINUTE=30

# ============================================
# GLOBAL RISK VIEW (Agent-Ready)
# ============================================
# The GlobalRiskView provides comprehensive portfolio risk monitoring
# for use by the core trading logic and future risk agents.

# Enable GlobalRiskView integration with RiskManager
ENABLE_GLOBAL_RISK_VIEW=true

# Enable public liquidation stream (high-frequency, for market analysis)
WS_ENABLE_PUBLIC_LIQUIDATION=false

# Maximum frequency for rebuilding portfolio snapshots (seconds)
# Lower = more responsive but higher CPU, higher = less responsive but efficient
WS_MAX_GLOBAL_SNAPSHOT_FREQ=1.0

# Enable caching for risk computations (recommended)
WS_ENABLE_RISK_CACHING=true

# ============================================
# LOGGING
# ============================================
LOG_LEVEL=INFO
LOG_DIR=logs
